<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[docker搭建hadoop集群]]></title>
    <url>%2F2020%2F04%2F21%2Fdocker%E6%90%AD%E5%BB%BAhadoop%E9%9B%86%E7%BE%A4%2F</url>
    <content type="text"><![CDATA[1.Docker安装：（windows下限制较多，docker的linux模式与VM的虚拟服务会冲突，每次使用需要重新开关服务，重启电脑，所以是在windows上的虚拟主机（VM）中实现，此教程适合使用过linux系统的人员）docker安装：https://www.runoob.com/docker/centos-docker-install.html 不同的系统只要安装好docker后，docker的操作都是一样的 2.docker的基本使用启动docker服务 service docker start docker刚安装好是没有镜像的，我用的ubuntu来搭建hadoop集群，也可以用其他linux发行版 docker pull ubuntu //拉取也就是在docker中下载ubuntu镜像,默认是最新的等待下载完成 docker images //查看镜像，可以看到刚拉取的ubuntu镜像 123root@linux:~# docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEubuntu latest 72300a873c2c 8 weeks ago 64.2MB ok,因为hadoop集群的通信是需要局域网的，所以我们要创建hadoop的专用网络，用桥接模式 docker network create --driver=bridge hadoop 创建好之后查看创建的网络 docker network ls 123456root@liunx:~# docker network lsNETWORK ID NAME DRIVER SCOPEa520acd0f5eb bridge bridge local62cb2d841382 hadoop bridge localb7fef15ea068 host host localba108fc8779a none null local 然后用ubuntu镜像运行一个容器 docker run -it ubuntu /bin/bash //i和t分别是以交互模式和终端运行 12root@linux:~# docker run -it ubuntu /bin/bashroot@b434aef5bc5f:/# exit可以退出容器，ctrl+p+q切换shell到主机而不退出容器 docker ps //显示运行的容器 docker start 容器名/容器ID //运行一个存在的容器 stop是停止运行的容器 docker attach 容器名/容器ID //进入运行的容器 上面的命令之后会经常使用 3.ubuntu镜像的配置做完上面两部分之后，就是配置Ubuntu了，因为初始拉取的ubuntu镜像只有最基础的内核和文件系统，缺少网络工具,jdk,ssh,vim而这些是配置集群不可或缺的部分 在root@b434aef5bc5f:/# 1.换源,将下面的内容添加到/etc/apt/sources.list中123456789101112131415deb http://mirrors.aliyun.com/ubuntu/ xenial maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial maindeb http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates maindeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security maindeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security universe 2.使用apt update来更新源1234apt install net-toolsapt install inetutils-ping//安装ping工具,不能直接apt-get install ping，因为在inetutils里面apt install openjdk-8-jdkapt install vim 3.安装sshssh是一种应用层的安全远程登录协议，它会生成一对密匙，分别是私匙和公匙，详细解释可以去看ssh官方文档 apt-get install openssh-server apt-get install openssh-client 使用ssh-keygen -t rsa -P &#39;&#39;来创建无密码登录 123456789101112131415161718192021root@b434aef5bc5f:/# ssh-keygen -t rsa -P &apos;&apos; Generating public/private rsa key pair.Enter file in which to save the key (/root/.ssh/id_rsa): /root/.ssh/id_rsa already exists.Overwrite (y/n)? yYour identification has been saved in /root/.ssh/id_rsa.Your public key has been saved in /root/.ssh/id_rsa.pub.The key fingerprint is:SHA256:p0UBShQiq/AxMBv+HxEku3a6WuwPkVu01E1HNck4kA8 root@cdbc600b933bThe key&apos;s randomart image is:+---[RSA 2048]----+|+ ..o++..+=o+o. ||.= oooo.oE.+ o. ||o.+. +.. .+ . ||.o.o= o . . ||. .* = S o || o B . + || * . . || o o || ..o.. |+----[SHA256]-----+ cat命令读出id_rsa.pub后以流的方式追加到authorized_keys中 cat .ssh/id_rsa.pub &gt;&gt; .ssh/authorized_keys 启动ssh服务 123root@b434aef5bc5f:~# service ssh startStarting OpenBSD Secure Shell server sshd [ OK ] 172.17.0.2是容器b434aef5bc5f的IP地址 1234567891011121314151617root@b434aef5bc5f:~# ssh 172.17.0.2Welcome to Ubuntu 18.04.4 LTS (GNU/Linux 5.3.0-kali2-amd64 x86_64) * Documentation: https://help.ubuntu.com * Management: https://landscape.canonical.com * Support: https://ubuntu.com/advantage This system has been minimized by removing packages and content that are not required on a system that users do not log into.To restore this content, you can run the &apos;unminimize&apos; command.The programs included with the Ubuntu system are free software;the exact distribution terms for each program are described in theindividual files in /usr/share/doc/*/copyright.Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted byapplicable law. 出现上述问题ssh -o StrictHostKeyChecking=no root@172.17.0.2 然后再次执行 成功！ 4.安装hadoop下载 wget http://mirror.bit.edu.cn/apache/hadoop/common/hadoop-3.2.1/hadoop-3.2.1.tar.gz 解压 tar -zxvf hadoop-3.2.1.tar.gz -C /usr/local 修改 /etc/profile 文件，添加环境变量 vim /etc/profile 追加以下内容 123456789101112131415161718192021222324#javaexport JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64export JRE_HOME=$&#123;JAVA_HOME&#125;/jre export CLASSPATH=.:$&#123;JAVA_HOME&#125;/lib:$&#123;JRE_HOME&#125;/lib export PATH=$&#123;JAVA_HOME&#125;/bin:$PATH#hadoopexport HADOOP_HOME=/usr/local/hadoopexport PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbinexport HADOOP_COMMON_HOME=$HADOOP_HOME export HADOOP_HDFS_HOME=$HADOOP_HOME export HADOOP_MAPRED_HOME=$HADOOP_HOMEexport HADOOP_YARN_HOME=$HADOOP_HOME export HADOOP_INSTALL=$HADOOP_HOME export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native export HADOOP_CONF_DIR=$HADOOP_HOME export HADOOP_LIBEXEC_DIR=$HADOOP_HOME/libexec export JAVA_LIBRARY_PATH=$HADOOP_HOME/lib/native:$JAVA_LIBRARY_PATHexport HADOOP_CONF_DIR=$HADOOP_PREFIX/etc/hadoopexport HDFS_DATANODE_USER=rootexport HDFS_DATANODE_SECURE_USER=rootexport HDFS_SECONDARYNAMENODE_USER=rootexport HDFS_NAMENODE_USER=rootexport YARN_RESOURCEMANAGER_USER=rootexport YARN_NODEMANAGER_USER=root export HADOOP_CONF_DIR=$HADOOP_PREFIX/etc/hadoop 需要改为 export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop否则运行hadoop命令需要找到路径并加./ 如果不嫌繁琐的话也可以不用改 运行source /etc/profile使其生效]]></content>
      <categories>
        <category>docker</category>
      </categories>
      <tags>
        <tag>hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F04%2F07%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
